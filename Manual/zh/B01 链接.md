# B1 链接

Yu Writer 支持 3 种目标类型的链接：

* 链接到外部 URL；
* 链接到当前文档的指定标题、其他文档、其他文档的当中的指定标题；
* 链接到 Yu Writer 命令。

对于前两种，可以使用 `插入链接` 对话框辅助编辑。

## 使用 `插件链接` 对话框创建和编辑链接

在编辑文档时，点击工具栏上的 `链接` 按钮，即会弹出 `插入链接` 对话框，在对话框里可以选择链接目标的类型，链接到的文档、链接到的标题，或者直接输入外部 URL，点 `插入` 按钮即生成链接 Markdown 代码。

将光标移动到已有的链接代码中的任意位置，然后再点击工具栏的 `链接` 按钮（或者右击，在弹出菜单中选择 `编辑链接`），同样会弹出 `插入链接` 对话框，此时可以在对话框里选择新的目标或者输入新的 URL，然后点击 `更新` 按钮即会更新已有的链接代码。

## 链接代码的语法

链接代码的语法如下

    [link title](target "optional text")

其中第一部分 `link title` 是链接的显示文本，即在渲染时，一个链接只有这部分文本会显示出来，后面的只作为链接的属性而不会显示。

第三部分是链接的提示文本，即当鼠标悬停在该链接时所显示的提示文本，该文本需要用双引号包围起来，一般链接的这部分是不需要的。

### 链接目标

链接代码的第二部分是链接的目标，根据目标类型的不同，该部分也有不同的语法：

链接到同一篇文档的其他章节

    [link title](#章节标题)

链接到另一篇文档

    [link title](目标文档的文件名)

链接到位于子目录的文档

    [link title](子目录名称/目标文档的文件名)

链接到另一篇文档的当中的某一个章节

    [link title](目标文档的文件名#章节标题)

链接到位于其他库的文档

    [link title](目标库名称:目标文件名)

链接到位于其他库的子目录的文档的某一个章节

    [link title](目标库名称:子目录名称/目标文档的文件名#章节标题)

### 链接目标的文本 Slugify 转换规则

跟 URL 的规则一样，链接目标不允许空格以及某些特殊符号，而一般的文档文件名和标题可能会含有大小写、空格，有时还有标点符号，所以在书写链接目标时，需要先将目标文本进行 Slugify 转换，下面是转换的规则：

1. 去除文档的文件扩展名，比如 “hello.md” 应转成 “hello”；
2. 所有拉丁字母转成相应的英文字母，比如 “Á” 转成 “A”；
3. 去掉所有标点符号，其中 `_` 号、`-` 号和空格符除外， 比如 “Hello! World.” 转成 “Hello World”；
4. 所有`_` 号和空格转成 `-` 号，比如 “Hello World” 转成 “Hello-World”；
5. 所有大写转成小写，比如 “Hello-World” 转成 “hello-world”；
6. 多个连续的 `-` 号会合并成为一个，比如 “hello---world” 转成 “hello-world”。

举一个完整的列子，比如 "New! Introducing Create React Native App.md" 应该转成 "new-introducing-create-react-native-app"。

`插入链接` 所生成的代码已经经过 Slugify 转换，所以如果觉得手动录入链接目标太过于繁琐，则可以考虑使用 `插入链接` 来生成链接。

## 链接到命令

Yu Writer 支持链接目标为命令类型的链接，这里所说的命令是指实现指定 Yu Writer 功能的操作，这种链接的格式是：

    [link title]($command:command-id?params)

其中的 `command-id` 为命令 id，你可以呼出 `命令面板`，然后按下 `Alt` 键，则可以看到各种命令的 id。

有些命令是支持参数的，比如 `reveal` 命令，后面使用问号加上参数，其中参数支持 Yu Writer 的变量（有关 Yu Writer 变量，请参阅 [C01 配置应用程序](c01-配置应用程序)）

下面是几个实际的命令链接的例子，你可以按下 `Command` 键（在 Windows/Linux 里对应的是 `Ctrl` 键）然后点击他们：

* [显示文档统计信息]($command:statistics)
* [显示或者隐藏大纲视图]($command:toggle-outline)
* [在文件管理器中显示下载文件夹]($command:reveal?${env.path.downloads})

## 引用风格的链接

链接目标除了可以直接写到链接代码里，还可以抽取出来单独写到文档的末尾处，这种链接称位引用风格的链接，它的语法是：

    [link title][link reference id]

然后在文档的末尾处写上：

    [link reference id]: target

下面是引用风格链接的实例：

* [打开 Yu Writer 官方网站][yu-writer-site]
* [显示文档统计信息][statistics]

注，在编辑器里点击上面的链接会让光标跳转到引用定义行，而不是打开链接目标。

## 自动链接

当文档中存在符合 URL 格式的字符串时，该字符串会被自动渲染为链接。比如 https://www.github.com

[yu-writer-site]: https://ivarptr.github.io/yu-writer.site/
[statistics]: $command:statistics